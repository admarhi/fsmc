<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Alignment of Cooperative and Competitive Communities • fsmc</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Alignment of Cooperative and Competitive Communities">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fsmc</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/class-MiCo.html">MiCo (Microbial Community) Class</a></li>
    <li><a class="dropdown-item" href="../articles/class-MiCoAl.html">Microbial Community Alignment Class</a></li>
    <li><a class="dropdown-item" href="../articles/classes.html">Classes</a></li>
    <li><a class="dropdown-item" href="../articles/Conventions.html">Conventions</a></li>
    <li><a class="dropdown-item" href="../articles/ex1-substrates.html">Alignment of Communities on Different Substrates</a></li>
    <li><a class="dropdown-item" href="../articles/ex2-func_type.html">Alignment of Communities with Different Functional Types</a></li>
    <li><a class="dropdown-item" href="../articles/ex3-cooccurrence.html">Alignment of Cooperative and Competitive Communities</a></li>
    <li><a class="dropdown-item" href="../articles/scoring-algorithm.html">Alignment Scoring Algorithm</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="ex3-cooccurrence_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="ex3-cooccurrence_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="ex3-cooccurrence_files/plotly-binding-4.10.4/plotly.js"></script><script src="ex3-cooccurrence_files/typedarray-0.1/typedarray.min.js"></script><link href="ex3-cooccurrence_files/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
<script src="ex3-cooccurrence_files/crosstalk-1.2.1/js/crosstalk.min.js"></script><link href="ex3-cooccurrence_files/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="ex3-cooccurrence_files/plotly-main-2.11.1/plotly-latest.min.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Alignment of Cooperative and Competitive Communities</h1>
            
      

      <div class="d-none name"><code>ex3-cooccurrence.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://admarhi.github.io/fsmc/">fsmc</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The set of competitve and cooperative communities both contain 100
communities.</p>
<div class="section level3">
<h3 id="cooperative-communities">Cooperative Communities<a class="anchor" aria-label="anchor" href="#cooperative-communities"></a>
</h3>
<p>In the cooperative dataset there are 100 communities, made up from a
total of 50 species. Each community consists of 10 species.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coop_url</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/admarhi/fsmc-data/main/cooccurrence/cooperative.csv"</span></span>
<span><span class="va">coop_tb</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="va">coop_url</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">51854</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (3): community, species, metabolites</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (2): fluxes, smetana</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">coop_tb</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 51,854</span></span>
<span><span class="co">#&gt; Columns: 5</span></span>
<span><span class="co">#&gt; $ community   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "coop_0", "coop_0", "coop_0", "coop_0", "coop_0", "coop_0"…</span></span>
<span><span class="co">#&gt; $ species     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Rothia_nasimurium_PT_32", "Exiguobacterium_sibiricum_255_…</span></span>
<span><span class="co">#&gt; $ metabolites <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "acald", "acald", "ala__D", "ala__D", "ala__L", "ala__L", …</span></span>
<span><span class="co">#&gt; $ fluxes      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1,…</span></span>
<span><span class="co">#&gt; $ smetana     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.0128, -0.0128, 0.0096, -0.0096, 0.0352, -0.0352, 0.0128,…</span></span>
<span></span>
<span><span class="va">coop_tb</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">community</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n_species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 2</span></span></span>
<span><span class="co">#&gt;    community n_species</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> coop_0           10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> coop_1           10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> coop_10          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> coop_11          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> coop_12          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> coop_13          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> coop_14          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> coop_15          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> coop_16          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> coop_17          10</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 90 more rows</span></span></span></code></pre></div>
<p><em>Bacillus_humi_DSM_16318</em> is the only species that only acts
as a donor, all 49 other species are both donors and receivers.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coop_tb</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="va">fluxes</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Bacillus_humi_DSM_16318"</span></span></code></pre></div>
<div class="section level4">
<h4 id="alignment">Alignment<a class="anchor" aria-label="anchor" href="#alignment"></a>
</h4>
<p>Create <code>MiCo</code> objects from the data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coop</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">coop_tb</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="va">community</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">coop_tb</span><span class="op">$</span><span class="va">community</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/imap.html" class="external-link">imap</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="../reference/newMiCo.html">newMiCo</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">.x</span>, name <span class="op">=</span> <span class="va">.y</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Create an alignment of all cooperative communities.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">coop_alig</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newMiCoAl.html">newMiCoAl</a></span><span class="op">(</span><span class="va">coop</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="competitive-communities">Competitive Communities<a class="anchor" aria-label="anchor" href="#competitive-communities"></a>
</h3>
<p>In the competitive dataset there are 50 species in total, with
<em>Bacillus_humi_DSM_16318</em> being the only species that only acts
as a donor, all 49 other species are both donors and receivers.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comp_url</span> <span class="op">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/admarhi/fsmc-data/main/cooccurrence/competitive.csv"</span></span>
<span><span class="va">comp_tb</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="va">comp_url</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Rows: </span><span style="color: #0000BB;">32306</span> <span style="font-weight: bold;">Columns: </span><span style="color: #0000BB;">5</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Column specification</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; <span style="font-weight: bold;">Delimiter:</span> ","</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">chr</span> (3): community, species, compound</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">dbl</span> (2): flux, smetana</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Use `spec()` to retrieve the full column specification for this data.</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">comp_tb</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 32,306</span></span>
<span><span class="co">#&gt; Columns: 5</span></span>
<span><span class="co">#&gt; $ community <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "comp_0", "comp_0", "comp_0", "comp_0", "comp_0", "comp_0", …</span></span>
<span><span class="co">#&gt; $ species   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Bacillus_circulans_NBRC_13626", "Solirubrobacter_soli_DSM_2…</span></span>
<span><span class="co">#&gt; $ compound  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "4abut", "4abut", "acald", "acald", "ala__L", "ala__L", "co2…</span></span>
<span><span class="co">#&gt; $ flux      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 1, -…</span></span>
<span><span class="co">#&gt; $ smetana   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.210000000, -0.210000000, 0.040000000, -0.040000000, 0.0500…</span></span>
<span></span>
<span><span class="va">comp_tb</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">community</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span>n_species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">species</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 2</span></span></span>
<span><span class="co">#&gt;    community n_species</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> comp_0           10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> comp_1           10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> comp_10          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> comp_11          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> comp_12          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> comp_13          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> comp_14          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> comp_15          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> comp_16          10</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> comp_17          10</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 90 more rows</span></span></span></code></pre></div>
<p>Create <code>MiCo</code> objects from the data.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comp</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">comp_tb</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>metabolites <span class="op">=</span> <span class="st">"compound"</span>, fluxes <span class="op">=</span> <span class="st">"flux"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html" class="external-link">nest</a></span><span class="op">(</span>.by <span class="op">=</span> <span class="va">community</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html" class="external-link">pull</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html" class="external-link">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">comp_tb</span><span class="op">$</span><span class="va">community</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://purrr.tidyverse.org/reference/imap.html" class="external-link">imap</a></span><span class="op">(</span><span class="op">~</span><span class="fu"><a href="../reference/newMiCo.html">newMiCo</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">.x</span>, name <span class="op">=</span> <span class="va">.y</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Create an alignment of all competitive communities.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comp_alig</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newMiCoAl.html">newMiCoAl</a></span><span class="op">(</span><span class="va">comp</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="alignment-comparison">Alignment Comparison<a class="anchor" aria-label="anchor" href="#alignment-comparison"></a>
</h2>
<p>The heatmaps below show metabolic functions that were aligned in at
least <code>frac</code> of the communities. The metabolites on the
y-axis are consumed to produce the metabolites on the x-axis.</p>
<div class="section level3">
<h3 id="cooperative-communities-50">Cooperative Communities 50%<a class="anchor" aria-label="anchor" href="#cooperative-communities-50"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">coop_alig</span>, frac <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="competitive-communities-50">Competitive Communities 50%<a class="anchor" aria-label="anchor" href="#competitive-communities-50"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">comp_alig</span>, frac <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="cooperative-communities-80">Cooperative Communities 80%<a class="anchor" aria-label="anchor" href="#cooperative-communities-80"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">coop_alig</span>, frac <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="competitive-communities-80">Competitive Communities 80%<a class="anchor" aria-label="anchor" href="#competitive-communities-80"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">comp_alig</span>, frac <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>These results indicate that cooperative communities are functionally
more similar to each other than competitive communities. With the
minimum alignment set to 50% there is a great discrepancy between the
extent of the alignment of cooperative and competitive communities. This
becomes even more pronounced in the alignment &gt;80%, here only the
glycerol -&gt; glycerol edge is present in competitive communities,
while in the cooperative communities the production of hydrogen sulfide
and ammonia from a variety of compounds are present.</p>
<p>We can use the <code>compareAlignments</code> function to compare the
alignments and find values, at which the alignments contain the same
number of reactions.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gg</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/compareAlignments.html">compareAlignments</a></span><span class="op">(</span></span>
<span>  <span class="va">coop_alig</span>, <span class="va">comp_alig</span>,</span>
<span>  names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"cooperative"</span>, <span class="st">"competitive"</span><span class="op">)</span>,</span>
<span>  smooth <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">gg</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>We can use <code>plotly</code> to make the plot interactive in order
to easily find relevant values for further analysis.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plotly</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plotly/man/ggplotly.html" class="external-link">ggplotly</a></span><span class="op">(</span><span class="va">gg</span><span class="op">)</span></span></code></pre></div>
<div class="plotly html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"data":[{"visible":false,"showlegend":false,"xaxis":null,"yaxis":null,"hoverinfo":"text","mode":"","frame":null}],"layout":{"margin":{"t":27.824636418824401,"r":7.3059360730593621,"b":41.778974318367787,"l":25.570776255707766},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.02,1.02],"tickmode":"array","ticktext":["0.00","0.25","0.50","0.75","1.00"],"tickvals":[0,0.25,0.5,0.75,1],"categoryorder":"array","categoryarray":["0.00","0.25","0.50","0.75","1.00"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Fraction Aligned Communities","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-0.050000000000000003,1.05],"tickmode":"array","ticktext":[],"tickvals":[],"categoryorder":"array","categoryarray":[],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Number of Reactions","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"rgba(0,0,0,1)","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"1b0a1a0dd307":{"x":{},"y":{},"colour":{},"fill":{},"type":"scatter"},"1b0a2b0e8aed":{"x":{},"y":{},"colour":{},"fill":{}}},"cur_data":"1b0a1a0dd307","visdat":{"1b0a1a0dd307":["function (y) ","x"],"1b0a2b0e8aed":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script><p>From the interactive version of the plot we decide to compare
alignments that align ~250 reactions in both, at a fraction of 0.51 (245
reactions) for cooperative and 0.31 (244 reactions) for competitive. The
same for 130 reactions, 0.63 and 0.39 for cooperative and competitive
respectively.</p>
</div>
<div class="section level3">
<h3 id="comparison-of-alignments-that-share-30-reactions">Comparison of alignments that share 30 reactions<a class="anchor" aria-label="anchor" href="#comparison-of-alignments-that-share-30-reactions"></a>
</h3>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">coop_alig</span>, <span class="fl">0.51</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-17-1.png" width="700"></p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">comp_alig</span>, <span class="fl">0.31</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-17-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="comparison-of-alignments-that-share-20-reactions">Comparison of alignments that share 20 reactions<a class="anchor" aria-label="anchor" href="#comparison-of-alignments-that-share-20-reactions"></a>
</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">coop_alig</span>, <span class="fl">0.63</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-18-1.png" width="700"></p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">comp_alig</span>, <span class="fl">0.39</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-18-2.png" width="700"></p>
</div>
<div class="section level3">
<h3 id="comparison-of-alignments-that-share-20-reactions-1">Comparison of alignments that share 20 reactions<a class="anchor" aria-label="anchor" href="#comparison-of-alignments-that-share-20-reactions-1"></a>
</h3>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">comp_alig</span>, <span class="fl">0.36</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plotAlignmentHeatmap.html">plotAlignmentHeatmap</a></span><span class="op">(</span><span class="va">coop_alig</span>, <span class="fl">0.6</span><span class="op">)</span></span></code></pre></div>
<p><img src="ex3-cooccurrence_files/figure-html/unnamed-chunk-19-2.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Adrian Hirt.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
