---
title: "Alignment of Communities with Different Functional Types"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Alignment of Communities with Different Functional Types}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(fsmc)
```
# Basic Tutorial

## Create a MiCo Object
`fsmc` contains a set of example data that can be used for the analysis of microbial communities. For this example, we will use data created by [MiSoS(oup)](https://github.com/sirno/misosoup). Two example communities are provided in the package `ac_A1R12_1` and `cit_A1R12_1`.

The `MiCo` function can take either a path to a .csv file or a data frame/tibble as input.


```{r}
# Inspect the data 
ac_A1R12_1
cit_A1R12_1

# Create MiCo objects
mc1 <- newMiCo(ac_A1R12_1)
mc2 <- newMiCo(cit_A1R12_1)
mc3 <- newMiCo(ac_A1R12_2)
mc4 <- newMiCo(cit_A1R12_2)

# Inspect MiCo Objects
mc1
mc1
```

## Align MiCo Objects
Two `MiCo` objects can be aligned by creating a `MiCoAl` object. The `MiCoAl` creator function can take any number of `MiCo` objects as input.

```{r}
# Align the MiCo objects by creating a MiCoAl object
alignment <- newMiCoAl(mc1, mc2, mc3, mc4)

# Inspect the alignment
alignment
```

### Analysis of the Alignment

```{r}

plotAlignmentNetwork(alignment, 0.8)
plotAlignmentHeatmap(alignment, 0.2)

```


# Experiment 2

- Set of 20 species
- 10 consortia with 5-10 species each
- each consortia in 2 different types of media
- align the solutions for each media type 
- identify central and peripheral consortia
- compare the central and peripheral consortia by running them in 10 different types of media

Questions:
- Are central consortia more optimised/generalist?
- Are peripheral consoria elastic/adaptable or specialists?


Ch
```{r}

```


# Findings

cons1:
- LB 5 species grow
- M9 3 species

cons2 didn't work

cons3:
- LB 4 species
- M9 2 species

cons4:
- iYO844 is the only strain that grows
- in M9 it consumes all of the glc and produces acald_e in LB it produces co2

cons5:
- on LB multiple strains grow until glucose runs out but continue growing despite this. Probably a good first consortium
- on M9 only iMM904 grows, but only until glucose runs out

cons6:
- on LB 3 species grow
- on M9 2 species grow, what are the differences to LB? could be interesting

cons7:
- LB 3 species grow rapidly and iY0844 slowly
- M9 iY0844 grows equally slow and one rapid species again

cons8:
- LB one slow one fast
- M9 no growth

cons9:
- LB 5 species grow, one even after the glucose runs out. Might be interesting 
- on M9 two species

cons10
- LB 6/9 species grow 
- M9 3 species

cons11
- iYL1228 and iMM904 grow on both, interesting to see how similar between them

cons12
- didnt work

cons13
- iY0844 grows equally good on both

cons14
- 4/5 species grow on LB

cons15
- iYL11228 only on both

cons16 & 17 didnt work

cons18 
- LB 2 species grow
- M9 only STM_v1_0

cons19
- STM_v1_0 only on both

run again with death rate and as chemostat to see what happens
