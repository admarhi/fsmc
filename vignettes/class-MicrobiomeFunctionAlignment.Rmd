---
title: "MicrobiomeFunctionAlignment Class"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{MicrobiomeFunctionAlignment Class}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(fsmc)
```

# Microbial Community Alignment Class

- Takes a number of `MicrobiomeFunction` objects as input (? list or ...) and an additional argument to specify if a pairwise alignment of the communities is desired. 
- The default is to align all communities against each other
- if `pairwise = TRUE` all unique pairwise combinations are aligned. 
- Should the alignment be calculated upon the creation of the object or should it be calculated on demand?

### Methods

A variety of methods can be called on a `MicrobiomeFunctionAlignment` object. The output of the methods has to be assigned back to the variable containing the object to persist. 

- clusterAlignment: Takes a `MicrobiomeFunctionAlignment` object as input and an additional argument to specify the clustering algorithm to be used, only works on `MicrobiomeFunctionAlignment` objects that have undergone a pairwise alignment. 

### Identity
A value which gives a scalar value to represent the identity between two communities. 

$$ \frac{\alpha}{\sum\limits_{i = 1}^{n}(\sum C_i - \alpha) + \alpha} $$



## Contents

- Communities hash/list containing the `MicrobiomeFunction` objects
- Alignment hash:
  - overall alignment matrix (binary)
  - hash for each level calculated (### how many levels?)
    - alignment matrix
    - longest connected components for each level
    - how to score alignments with more communities more highly?
    - how to figure out the connecctedness for parts of the alignment in whicch there are less communities represented than in the overall alignment?
